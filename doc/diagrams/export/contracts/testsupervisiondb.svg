<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="467px" preserveAspectRatio="none" style="width:808px;height:467px;" version="1.1" viewBox="0 0 808 467" width="808px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="Source Sans Pro Semibold" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="159" x="328" y="17.4023">TestSupervisionDB</text><!--class ContractProvider--><rect fill="#F8F8F8" height="67.2207" id="ContractProvider" style="stroke: #383838; stroke-width: 1.5;" width="210" x="484.5" y="183.1992"/><ellipse cx="537.25" cy="202.332" fill="#B1B1B1" rx="11" ry="11" style="stroke: #383838; stroke-width: 1.0;"/><path d="M533.1777,198.0972 L533.1777,195.939 L540.5571,195.939 L540.5571,198.0972 L538.0918,198.0972 L538.0918,206.1738 L540.5571,206.1738 L540.5571,208.332 L533.1777,208.332 L533.1777,206.1738 L535.6431,206.1738 L535.6431,198.0972 Z "/><text fill="#000000" font-family="Source Sans Pro Semibold" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="62" x="574.75" y="199.8008">«Interface»</text><text fill="#000000" font-family="Source Sans Pro Semibold" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="96" x="557.75" y="213.9336">ContractProvider</text><line style="stroke: #383838; stroke-width: 1.5;" x1="485.5" x2="693.5" y1="221.4648" y2="221.4648"/><line style="stroke: #383838; stroke-width: 1.5;" x1="485.5" x2="693.5" y1="229.4648" y2="229.4648"/><text fill="#000000" font-family="Source Sans Pro Semibold" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="198" x="490.5" y="244.0996">+contracts(name: bytes32) : address</text><!--class ContractManager--><rect fill="#F8F8F8" height="80.1758" id="ContractManager" style="stroke: #383838; stroke-width: 1.5;" width="467" x="330" y="29.1992"/><ellipse cx="510.25" cy="48.332" fill="#C2C2C2" rx="11" ry="11" style="stroke: #383838; stroke-width: 1.0;"/><path d="M513.2231,53.9751 Q512.6421,54.2739 512.0029,54.4233 Q511.3638,54.5728 510.6582,54.5728 Q508.1514,54.5728 506.8315,52.9209 Q505.5117,51.269 505.5117,48.1479 Q505.5117,45.0186 506.8315,43.3667 Q508.1514,41.7148 510.6582,41.7148 Q511.3638,41.7148 512.0112,41.8643 Q512.6587,42.0137 513.2231,42.3125 L513.2231,45.0352 Q512.5923,44.4541 511.9988,44.1843 Q511.4053,43.9146 510.7744,43.9146 Q509.4297,43.9146 508.7449,44.9812 Q508.0601,46.0479 508.0601,48.1479 Q508.0601,50.2397 508.7449,51.3064 Q509.4297,52.373 510.7744,52.373 Q511.4053,52.373 511.9988,52.1033 Q512.5923,51.8335 513.2231,51.2524 Z "/><text fill="#000000" font-family="Source Sans Pro Semibold" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="60" x="549.75" y="45.8008">«Contract»</text><text fill="#000000" font-family="Source Sans Pro Semibold" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="98" x="530.75" y="59.9336">ContractManager</text><line style="stroke: #383838; stroke-width: 1.5;" x1="331" x2="796" y1="67.4648" y2="67.4648"/><text fill="#000000" font-family="Source Sans Pro Semibold" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="269" x="336" y="82.0996">+contracts: mapping {name: bytes32 =&gt; address}</text><line style="stroke: #383838; stroke-width: 1.5;" x1="331" x2="796" y1="88.4199" y2="88.4199"/><text fill="#000000" font-family="Source Sans Pro Semibold" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="455" x="336" y="103.0547">+addContract(contractName: bytes32, contractAddress: address) : bool {onlyOwner}</text><!--class ManagedContract--><rect fill="#F8F8F8" height="38.2656" id="ManagedContract" style="stroke: #383838; stroke-width: 1.5;" width="133" x="272" y="197.6992"/><ellipse cx="287" cy="216.832" fill="#C2C2C2" rx="11" ry="11" style="stroke: #383838; stroke-width: 1.0;"/><path d="M289.9731,222.4751 Q289.3921,222.7739 288.7529,222.9233 Q288.1138,223.0728 287.4082,223.0728 Q284.9014,223.0728 283.5815,221.4209 Q282.2617,219.769 282.2617,216.6479 Q282.2617,213.5186 283.5815,211.8667 Q284.9014,210.2148 287.4082,210.2148 Q288.1138,210.2148 288.7612,210.3643 Q289.4087,210.5137 289.9731,210.8125 L289.9731,213.5352 Q289.3423,212.9541 288.7488,212.6843 Q288.1553,212.4146 287.5244,212.4146 Q286.1797,212.4146 285.4949,213.4812 Q284.8101,214.5479 284.8101,216.6479 Q284.8101,218.7397 285.4949,219.8064 Q286.1797,220.873 287.5244,220.873 Q288.1553,220.873 288.7488,220.6033 Q289.3423,220.3335 289.9731,219.7524 Z "/><text fill="#000000" font-family="Source Sans Pro Semibold" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="60" x="321.5" y="214.3008">«Contract»</text><text fill="#000000" font-family="Source Sans Pro Semibold" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="101" x="301" y="228.4336">ManagedContract</text><!--class Supervisor--><rect fill="#F8F8F8" height="38.2656" id="Supervisor" style="stroke: #383838; stroke-width: 1.5;" width="92" x="176.5" y="50.1992"/><ellipse cx="191.5" cy="69.332" fill="#C2C2C2" rx="11" ry="11" style="stroke: #383838; stroke-width: 1.0;"/><path d="M194.4731,74.9751 Q193.8921,75.2739 193.2529,75.4233 Q192.6138,75.5728 191.9082,75.5728 Q189.4014,75.5728 188.0815,73.9209 Q186.7617,72.269 186.7617,69.1479 Q186.7617,66.0186 188.0815,64.3667 Q189.4014,62.7148 191.9082,62.7148 Q192.6138,62.7148 193.2612,62.8643 Q193.9087,63.0137 194.4731,63.3125 L194.4731,66.0352 Q193.8423,65.4541 193.2488,65.1843 Q192.6553,64.9146 192.0244,64.9146 Q190.6797,64.9146 189.9949,65.9812 Q189.3101,67.0479 189.3101,69.1479 Q189.3101,71.2397 189.9949,72.3064 Q190.6797,73.373 192.0244,73.373 Q192.6553,73.373 193.2488,73.1033 Q193.8423,72.8335 194.4731,72.2524 Z "/><text fill="#000000" font-family="Source Sans Pro Semibold" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="44" x="213.5" y="66.8008">«Struct»</text><text fill="#000000" font-family="Source Sans Pro Semibold" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="60" x="205.5" y="80.9336">Supervisor</text><!--class Test--><rect fill="#F8F8F8" height="38.2656" id="Test" style="stroke: #383838; stroke-width: 1.5;" width="72" x="69.5" y="50.1992"/><ellipse cx="84.5" cy="69.332" fill="#C2C2C2" rx="11" ry="11" style="stroke: #383838; stroke-width: 1.0;"/><path d="M87.4731,74.9751 Q86.8921,75.2739 86.2529,75.4233 Q85.6138,75.5728 84.9082,75.5728 Q82.4014,75.5728 81.0815,73.9209 Q79.7617,72.269 79.7617,69.1479 Q79.7617,66.0186 81.0815,64.3667 Q82.4014,62.7148 84.9082,62.7148 Q85.6138,62.7148 86.2612,62.8643 Q86.9087,63.0137 87.4731,63.3125 L87.4731,66.0352 Q86.8423,65.4541 86.2488,65.1843 Q85.6553,64.9146 85.0244,64.9146 Q83.6797,64.9146 82.9949,65.9812 Q82.3101,67.0479 82.3101,69.1479 Q82.3101,71.2397 82.9949,72.3064 Q83.6797,73.373 85.0244,73.373 Q85.6553,73.373 86.2488,73.1033 Q86.8423,72.8335 87.4731,72.2524 Z "/><text fill="#000000" font-family="Source Sans Pro Semibold" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="44" x="96.5" y="66.8008">«Struct»</text><text fill="#000000" font-family="Source Sans Pro Semibold" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="25" x="106" y="80.9336">Test</text><!--class TestSupervision--><rect fill="#F8F8F8" height="93.1309" id="TestSupervision" style="stroke: #383838; stroke-width: 1.5;" width="130" x="106.5" y="170.1992"/><ellipse cx="125.1" cy="189.332" fill="#C2C2C2" rx="11" ry="11" style="stroke: #383838; stroke-width: 1.0;"/><path d="M128.0731,194.9751 Q127.4921,195.2739 126.8529,195.4233 Q126.2138,195.5728 125.5082,195.5728 Q123.0014,195.5728 121.6815,193.9209 Q120.3617,192.269 120.3617,189.1479 Q120.3617,186.0186 121.6815,184.3667 Q123.0014,182.7148 125.5082,182.7148 Q126.2138,182.7148 126.8612,182.8643 Q127.5087,183.0137 128.0731,183.3125 L128.0731,186.0352 Q127.4423,185.4541 126.8488,185.1843 Q126.2553,184.9146 125.6244,184.9146 Q124.2797,184.9146 123.5949,185.9812 Q122.9101,187.0479 122.9101,189.1479 Q122.9101,191.2397 123.5949,192.3064 Q124.2797,193.373 125.6244,193.373 Q126.2553,193.373 126.8488,193.1033 Q127.4423,192.8335 128.0731,192.2524 Z "/><text fill="#000000" font-family="Source Sans Pro Semibold" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="44" x="162.9" y="186.8008">«Struct»</text><text fill="#000000" font-family="Source Sans Pro Semibold" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="90" x="139.9" y="200.9336">TestSupervision</text><line style="stroke: #383838; stroke-width: 1.5;" x1="107.5" x2="235.5" y1="208.4648" y2="208.4648"/><text fill="#000000" font-family="Source Sans Pro Semibold" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="118" x="112.5" y="223.0996">supervisorID: address</text><text fill="#000000" font-family="Source Sans Pro Semibold" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="58" x="112.5" y="236.0547">testID: uint</text><text fill="#000000" font-family="Source Sans Pro Semibold" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="67" x="112.5" y="249.0098">idIndex: uint</text><line style="stroke: #383838; stroke-width: 1.5;" x1="107.5" x2="235.5" y1="255.3301" y2="255.3301"/><!--class TestSupervisionDB--><rect fill="#F8F8F8" height="131.9961" id="TestSupervisionDB" style="stroke: #383838; stroke-width: 1.5;" width="497" x="6" y="324.1992"/><ellipse cx="197.25" cy="343.332" fill="#C2C2C2" rx="11" ry="11" style="stroke: #383838; stroke-width: 1.0;"/><path d="M200.2231,348.9751 Q199.6421,349.2739 199.0029,349.4233 Q198.3638,349.5728 197.6582,349.5728 Q195.1514,349.5728 193.8315,347.9209 Q192.5117,346.269 192.5117,343.1479 Q192.5117,340.0186 193.8315,338.3667 Q195.1514,336.7148 197.6582,336.7148 Q198.3638,336.7148 199.0112,336.8643 Q199.6587,337.0137 200.2231,337.3125 L200.2231,340.0352 Q199.5923,339.4541 198.9988,339.1843 Q198.4053,338.9146 197.7744,338.9146 Q196.4297,338.9146 195.7449,339.9812 Q195.0601,341.0479 195.0601,343.1479 Q195.0601,345.2397 195.7449,346.3064 Q196.4297,347.373 197.7744,347.373 Q198.4053,347.373 198.9988,347.1033 Q199.5923,346.8335 200.2231,346.2524 Z "/><text fill="#000000" font-family="Source Sans Pro Semibold" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="60" x="240.75" y="340.8008">«Contract»</text><text fill="#000000" font-family="Source Sans Pro Semibold" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="106" x="217.75" y="354.9336">TestSupervisionDB</text><line style="stroke: #383838; stroke-width: 1.5;" x1="7" x2="502" y1="362.4648" y2="362.4648"/><text fill="#000000" font-family="Source Sans Pro Semibold" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="163" x="12" y="377.0996">-testSupervisionIDs: bytes32[]</text><text fill="#000000" font-family="Source Sans Pro Semibold" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="312" x="12" y="390.0547">-testSupervisions: mapping {bytes32 =&gt; TestSupervision}</text><line style="stroke: #383838; stroke-width: 1.5;" x1="7" x2="502" y1="396.375" y2="396.375"/><text fill="#000000" font-family="Source Sans Pro Semibold" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="322" x="12" y="411.0098">+exists(supervisorID: address, testID: uint) : bool {constant}</text><text fill="#000000" font-family="Source Sans Pro Semibold" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="305" x="12" y="423.9648">+addTestSupervision(supervisorID: address, testID: uint)</text><text fill="#000000" font-family="Source Sans Pro Semibold" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="485" x="12" y="436.9199">+getTestSupervisionAt(index: uint) : Tuple { supervisorID: address, testID: uint } {constant}</text><text fill="#000000" font-family="Source Sans Pro Semibold" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="475" x="12" y="449.875">+getTestSupervision(id: bytes32) : Tuple { supervisorID: address, testID: uint } {constant}</text><!--link ContractManager to ContractProvider--><path d="M570.6046,109.5042 C573.5224,126.0572 576.9429,145.4619 580.0659,163.1786 " fill="none" id="ContractManager-ContractProvider" style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="none" points="586.969,162.0176,583.5473,182.9291,573.1816,164.4479,586.969,162.0176" style="stroke: #383838; stroke-width: 1.0;"/><!--link ManagedContract to ContractProvider--><path d="M405.1044,216.6992 C427.8427,216.6992 453.9168,216.6992 479.1605,216.6992 " fill="none" id="ManagedContract-ContractProvider" style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#383838" points="484.1969,216.6992,475.1969,212.6992,479.1969,216.6992,475.1969,220.6992,484.1969,216.6992" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="Source Sans Pro Semibold" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="43" x="423.25" y="210.2676">«uses»</text><!--link ContractManager to ManagedContract--><path d="M497.9174,112.1922 C454.8388,140.4327 400.5786,176.0033 367.7634,197.5154 " fill="none" id="ContractManager-ManagedContract" style="stroke: #383838; stroke-width: 1.0;"/><polygon fill="#383838" points="502.315,109.3094,492.5952,110.8985,498.1334,112.0507,496.9812,117.589,502.315,109.3094" style="stroke: #383838; stroke-width: 1.0;"/><!--link ManagedContract to TestSupervisionDB--><path d="M320.4737,253.932 C310.5671,274.3939 297.9851,300.3817 286.4711,324.1636 " fill="none" id="ManagedContract-TestSupervisionDB" style="stroke: #383838; stroke-width: 1.0;"/><polygon fill="none" points="314.1738,250.8805,329.1896,235.9296,326.7747,256.9812,314.1738,250.8805" style="stroke: #383838; stroke-width: 1.0;"/><!--link TestSupervision to TestSupervisionDB--><path d="M193.961,263.6508 C202.8427,282.2168 213.2099,303.8879 222.8294,323.9962 " fill="none" id="TestSupervision-TestSupervisionDB" style="stroke: #383838; stroke-width: 1.0;"/><!--link Supervisor to TestSupervision--><path d="M215.8326,88.4822 C208.7046,109.0978 197.1406,142.5425 187.6105,170.1052 " fill="none" id="Supervisor-TestSupervision" style="stroke: #383838; stroke-width: 1.0;"/><!--link Test to TestSupervision--><path d="M114.1283,88.4822 C123.3529,109.0978 138.318,142.5425 150.6512,170.1052 " fill="none" id="Test-TestSupervision" style="stroke: #383838; stroke-width: 1.0;"/><!--
@startuml


'skinparam handwritten true
skinparam monochrome true
skinparam shadowing false
skinparam classAttributeIconSize 0
skinparam defaultFontName "Source Sans Pro Semibold"
    







title Owned

class Owned << Contract >> {
  +owner: address
  __
  +Owned()
  .. Modifier ..
  #onlyOwner()
}



title ContractProvider

interface ContractProvider << Interface >> {
  +contracts(name: bytes32) : address
}


title ContractManager

class ContractManager << Contract >> {
  +contracts: mapping {name: bytes32 => address}
  +addContract(contractName: bytes32, contractAddress: address) : bool {onlyOwner}
}

ContractManager -up-|> Owned

ContractManager .down.|> ContractProvider


title ManagedContract

class ManagedContract << Contract >> {
  #MAN: address
  __
  +setContractManagerAddress(contractManagerAddress: address) : bool
  .. Modifier ..
  #permission(permittedSender: bytes32)
}

ManagedContract .right.> ContractProvider : << uses >>
ManagedContract -up-> ContractManager

hide Owned




title SupervisorDB

class Supervisor << Struct >> {
  name: bytes32
  uaccountID: bytes32
  index: uint
  courseSupervisionIDs: bytes32[]
  testSupervisionIDs: bytes32[]
  supervisorAssessmentIDs: bytes32[]
}

class SupervisorDB << Contract >> {
  -indices: address[]
  -supervisors: mapping {address => Supervisor}
  __
  +isSupervisor(account: address) : bool {constant}
  +addSupervisor(account: address, name: bytes32, uaccountID: bytes32)
  +getSupervisor(account: address) : Tuple { name: bytes32, uaccountID: bytes32 } {constant}
  +getSupervisorAt(index: uint) : Tuple { name: bytes32, uaccountID: bytes32 } {constant}
  +getNumSupervisors() : uint {constant}
  .. Setter for combined values ..
  +addCourseSupervisionID(account: address, id: bytes32) {permission: "coursesupervisiondb"}
  +addTestSupervisionID(account: address, id: bytes32) {permission: "testsupervisiondb"}
  +addSupervisorAssessmentID(account: address, id: bytes32) {permission: "supervisorassessmentdb"}
}

SupervisorDB -up-|> ManagedContract
SupervisorDB -down- Supervisor

hide ManagedContract members






title CourseDB

class Course << Struct >> {
  description: string
  ectsPoints: uint
  name: bytes32
  assignmentIDs: uint[]
  testIDs: uint[]
  courseParticipationIDs: bytes32[]
  courseSupervisionIDs: bytes32[]
}

class CourseDB << Contract >> {
  -courses: Course[]
  __
  +addCourse(description: string, name: bytes32, ectsPoints: uint) : uint
  +getCourse(id: uint) : Tuple { description: string, name: bytes32, ectsPoints: uint } {constant}
  +getNumCourses() : uint {constant}
  .. Setter for combined values ..
  +addCourseParticipationID(courseID: uint, id: bytes32) {permission: "courseparticipationdb" }
  +addCourseSupervisionID(courseID: uint, id: bytes32) {permission: "coursesupervisiondb"}
  +addAssignmentID(courseID: uint, id: uint) {permission: "assignmentdb"}
  +addTestID(courseID: uint, id: uint) {permission: "testdb"}
}

CourseDB -up-|> ManagedContract
CourseDB -down- Course

hide ManagedContract members


title TestDB

class Test << Struct >> {
  description: string
  maxPoints: uint
  dueDate: uint
  courseID: uint
  submissionIDs: uint[]
  testParticipationIDs: bytes32[]
  testSupervisionIDs: bytes32[]
}

class TestDB << Contract >> {
  -tests: Test[]
  __
  +addTest(description: string, maxPoints: uint, dueDate: uint, courseID: uint) : uint
  +getTest(id: uint) : Tuple { description: string, maxPoints: uint, dueDate: uint, courseID: uint } {constant}
  +getNumTests() : uint {constant}
  .. Setter for combined values ..
  +addTestParticipationID(testID: uint, id: bytes32) {permission: "testparticipationdb"}
  +addTestSupervisionID(testID: uint, id: bytes32) {permission: "testsupervisiondb"}
  +addSubmissionID(testID: uint, id: uint) {permission: "submissiondb"}
}

TestDB -up-|> ManagedContract
TestDB -down- Test
Test -left- Course

hide ManagedContract members
hide CourseDB
hide Course members


title TestSupervisionDB

class TestSupervision << Struct >> {
  supervisorID: address
  testID: uint
  idIndex: uint
}

class TestSupervisionDB << Contract >> {
  -testSupervisionIDs: bytes32[]
  -testSupervisions: mapping {bytes32 => TestSupervision}
  __
  +exists(supervisorID: address, testID: uint) : bool {constant}
  +addTestSupervision(supervisorID: address, testID: uint)
  +getTestSupervisionAt(index: uint) : Tuple { supervisorID: address, testID: uint } {constant}
  +getTestSupervision(id: bytes32) : Tuple { supervisorID: address, testID: uint } {constant}
}

TestSupervisionDB -up-|> ManagedContract
TestSupervisionDB -up- TestSupervision
TestSupervision -up- Supervisor
TestSupervision -up- Test

hide ManagedContract members
hide SupervisorDB
hide Supervisor members
hide TestDB
hide Test members
hide Course

@enduml

PlantUML version 1.2017.18(Fri Oct 06 18:56:32 CEST 2017)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_131-b11
Operating System: Mac OS X
OS Version: 10.12.6
Default Encoding: UTF-8
Language: de
Country: AT
--></g></svg>