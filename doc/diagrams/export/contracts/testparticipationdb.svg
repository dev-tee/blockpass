<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="467px" preserveAspectRatio="none" style="width:798px;height:467px;" version="1.1" viewBox="0 0 798 467" width="798px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="Source Sans Pro Semibold" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="168" x="319" y="17.4023">TestParticipationDB</text><!--class ContractProvider--><rect fill="#F8F8F8" height="67.2207" id="ContractProvider" style="stroke: #383838; stroke-width: 1.5;" width="210" x="478" y="183.1992"/><ellipse cx="530.75" cy="202.332" fill="#B1B1B1" rx="11" ry="11" style="stroke: #383838; stroke-width: 1.0;"/><path d="M526.6777,198.0972 L526.6777,195.939 L534.0571,195.939 L534.0571,198.0972 L531.5918,198.0972 L531.5918,206.1738 L534.0571,206.1738 L534.0571,208.332 L526.6777,208.332 L526.6777,206.1738 L529.1431,206.1738 L529.1431,198.0972 Z "/><text fill="#000000" font-family="Source Sans Pro Semibold" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="62" x="568.25" y="199.8008">«Interface»</text><text fill="#000000" font-family="Source Sans Pro Semibold" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="96" x="551.25" y="213.9336">ContractProvider</text><line style="stroke: #383838; stroke-width: 1.5;" x1="479" x2="687" y1="221.4648" y2="221.4648"/><line style="stroke: #383838; stroke-width: 1.5;" x1="479" x2="687" y1="229.4648" y2="229.4648"/><text fill="#000000" font-family="Source Sans Pro Semibold" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="198" x="484" y="244.0996">+contracts(name: bytes32) : address</text><!--class ContractManager--><rect fill="#F8F8F8" height="80.1758" id="ContractManager" style="stroke: #383838; stroke-width: 1.5;" width="467" x="320.5" y="29.1992"/><ellipse cx="500.75" cy="48.332" fill="#C2C2C2" rx="11" ry="11" style="stroke: #383838; stroke-width: 1.0;"/><path d="M503.7231,53.9751 Q503.1421,54.2739 502.5029,54.4233 Q501.8638,54.5728 501.1582,54.5728 Q498.6514,54.5728 497.3315,52.9209 Q496.0117,51.269 496.0117,48.1479 Q496.0117,45.0186 497.3315,43.3667 Q498.6514,41.7148 501.1582,41.7148 Q501.8638,41.7148 502.5112,41.8643 Q503.1587,42.0137 503.7231,42.3125 L503.7231,45.0352 Q503.0923,44.4541 502.4988,44.1843 Q501.9053,43.9146 501.2744,43.9146 Q499.9297,43.9146 499.2449,44.9812 Q498.5601,46.0479 498.5601,48.1479 Q498.5601,50.2397 499.2449,51.3064 Q499.9297,52.373 501.2744,52.373 Q501.9053,52.373 502.4988,52.1033 Q503.0923,51.8335 503.7231,51.2524 Z "/><text fill="#000000" font-family="Source Sans Pro Semibold" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="60" x="540.25" y="45.8008">«Contract»</text><text fill="#000000" font-family="Source Sans Pro Semibold" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="98" x="521.25" y="59.9336">ContractManager</text><line style="stroke: #383838; stroke-width: 1.5;" x1="321.5" x2="786.5" y1="67.4648" y2="67.4648"/><text fill="#000000" font-family="Source Sans Pro Semibold" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="269" x="326.5" y="82.0996">+contracts: mapping {name: bytes32 =&gt; address}</text><line style="stroke: #383838; stroke-width: 1.5;" x1="321.5" x2="786.5" y1="88.4199" y2="88.4199"/><text fill="#000000" font-family="Source Sans Pro Semibold" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="455" x="326.5" y="103.0547">+addContract(contractName: bytes32, contractAddress: address) : bool {onlyOwner}</text><!--class ManagedContract--><rect fill="#F8F8F8" height="38.2656" id="ManagedContract" style="stroke: #383838; stroke-width: 1.5;" width="133" x="265.5" y="197.6992"/><ellipse cx="280.5" cy="216.832" fill="#C2C2C2" rx="11" ry="11" style="stroke: #383838; stroke-width: 1.0;"/><path d="M283.4731,222.4751 Q282.8921,222.7739 282.2529,222.9233 Q281.6138,223.0728 280.9082,223.0728 Q278.4014,223.0728 277.0815,221.4209 Q275.7617,219.769 275.7617,216.6479 Q275.7617,213.5186 277.0815,211.8667 Q278.4014,210.2148 280.9082,210.2148 Q281.6138,210.2148 282.2612,210.3643 Q282.9087,210.5137 283.4731,210.8125 L283.4731,213.5352 Q282.8423,212.9541 282.2488,212.6843 Q281.6553,212.4146 281.0244,212.4146 Q279.6797,212.4146 278.9949,213.4812 Q278.3101,214.5479 278.3101,216.6479 Q278.3101,218.7397 278.9949,219.8064 Q279.6797,220.873 281.0244,220.873 Q281.6553,220.873 282.2488,220.6033 Q282.8423,220.3335 283.4731,219.7524 Z "/><text fill="#000000" font-family="Source Sans Pro Semibold" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="60" x="315" y="214.3008">«Contract»</text><text fill="#000000" font-family="Source Sans Pro Semibold" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="101" x="294.5" y="228.4336">ManagedContract</text><!--class Student--><rect fill="#F8F8F8" height="38.2656" id="Student" style="stroke: #383838; stroke-width: 1.5;" width="75" x="182.5" y="50.1992"/><ellipse cx="197.5" cy="69.332" fill="#C2C2C2" rx="11" ry="11" style="stroke: #383838; stroke-width: 1.0;"/><path d="M200.4731,74.9751 Q199.8921,75.2739 199.2529,75.4233 Q198.6138,75.5728 197.9082,75.5728 Q195.4014,75.5728 194.0815,73.9209 Q192.7617,72.269 192.7617,69.1479 Q192.7617,66.0186 194.0815,64.3667 Q195.4014,62.7148 197.9082,62.7148 Q198.6138,62.7148 199.2612,62.8643 Q199.9087,63.0137 200.4731,63.3125 L200.4731,66.0352 Q199.8423,65.4541 199.2488,65.1843 Q198.6553,64.9146 198.0244,64.9146 Q196.6797,64.9146 195.9949,65.9812 Q195.3101,67.0479 195.3101,69.1479 Q195.3101,71.2397 195.9949,72.3064 Q196.6797,73.373 198.0244,73.373 Q198.6553,73.373 199.2488,73.1033 Q199.8423,72.8335 200.4731,72.2524 Z "/><text fill="#000000" font-family="Source Sans Pro Semibold" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="44" x="211" y="66.8008">«Struct»</text><text fill="#000000" font-family="Source Sans Pro Semibold" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="43" x="211.5" y="80.9336">Student</text><!--class Test--><rect fill="#F8F8F8" height="38.2656" id="Test" style="stroke: #383838; stroke-width: 1.5;" width="72" x="75" y="50.1992"/><ellipse cx="90" cy="69.332" fill="#C2C2C2" rx="11" ry="11" style="stroke: #383838; stroke-width: 1.0;"/><path d="M92.9731,74.9751 Q92.3921,75.2739 91.7529,75.4233 Q91.1138,75.5728 90.4082,75.5728 Q87.9014,75.5728 86.5815,73.9209 Q85.2617,72.269 85.2617,69.1479 Q85.2617,66.0186 86.5815,64.3667 Q87.9014,62.7148 90.4082,62.7148 Q91.1138,62.7148 91.7612,62.8643 Q92.4087,63.0137 92.9731,63.3125 L92.9731,66.0352 Q92.3423,65.4541 91.7488,65.1843 Q91.1553,64.9146 90.5244,64.9146 Q89.1797,64.9146 88.4949,65.9812 Q87.8101,67.0479 87.8101,69.1479 Q87.8101,71.2397 88.4949,72.3064 Q89.1797,73.373 90.5244,73.373 Q91.1553,73.373 91.7488,73.1033 Q92.3423,72.8335 92.9731,72.2524 Z "/><text fill="#000000" font-family="Source Sans Pro Semibold" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="44" x="102" y="66.8008">«Struct»</text><text fill="#000000" font-family="Source Sans Pro Semibold" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="25" x="111.5" y="80.9336">Test</text><!--class TestParticipation--><rect fill="#F8F8F8" height="93.1309" id="TestParticipation" style="stroke: #383838; stroke-width: 1.5;" width="128" x="102" y="170.1992"/><ellipse cx="117" cy="189.332" fill="#C2C2C2" rx="11" ry="11" style="stroke: #383838; stroke-width: 1.0;"/><path d="M119.9731,194.9751 Q119.3921,195.2739 118.7529,195.4233 Q118.1138,195.5728 117.4082,195.5728 Q114.9014,195.5728 113.5815,193.9209 Q112.2617,192.269 112.2617,189.1479 Q112.2617,186.0186 113.5815,184.3667 Q114.9014,182.7148 117.4082,182.7148 Q118.1138,182.7148 118.7612,182.8643 Q119.4087,183.0137 119.9731,183.3125 L119.9731,186.0352 Q119.3423,185.4541 118.7488,185.1843 Q118.1553,184.9146 117.5244,184.9146 Q116.1797,184.9146 115.4949,185.9812 Q114.8101,187.0479 114.8101,189.1479 Q114.8101,191.2397 115.4949,192.3064 Q116.1797,193.373 117.5244,193.373 Q118.1553,193.373 118.7488,193.1033 Q119.3423,192.8335 119.9731,192.2524 Z "/><text fill="#000000" font-family="Source Sans Pro Semibold" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="44" x="157" y="186.8008">«Struct»</text><text fill="#000000" font-family="Source Sans Pro Semibold" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="96" x="131" y="200.9336">TestParticipation</text><line style="stroke: #383838; stroke-width: 1.5;" x1="103" x2="229" y1="208.4648" y2="208.4648"/><text fill="#000000" font-family="Source Sans Pro Semibold" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="101" x="108" y="223.0996">studentID: address</text><text fill="#000000" font-family="Source Sans Pro Semibold" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="58" x="108" y="236.0547">testID: uint</text><text fill="#000000" font-family="Source Sans Pro Semibold" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="67" x="108" y="249.0098">idIndex: uint</text><line style="stroke: #383838; stroke-width: 1.5;" x1="103" x2="229" y1="255.3301" y2="255.3301"/><!--class TestParticipationDB--><rect fill="#F8F8F8" height="131.9961" id="TestParticipationDB" style="stroke: #383838; stroke-width: 1.5;" width="484" x="6" y="324.1992"/><ellipse cx="187.75" cy="343.332" fill="#C2C2C2" rx="11" ry="11" style="stroke: #383838; stroke-width: 1.0;"/><path d="M190.7231,348.9751 Q190.1421,349.2739 189.5029,349.4233 Q188.8638,349.5728 188.1582,349.5728 Q185.6514,349.5728 184.3315,347.9209 Q183.0117,346.269 183.0117,343.1479 Q183.0117,340.0186 184.3315,338.3667 Q185.6514,336.7148 188.1582,336.7148 Q188.8638,336.7148 189.5112,336.8643 Q190.1587,337.0137 190.7231,337.3125 L190.7231,340.0352 Q190.0923,339.4541 189.4988,339.1843 Q188.9053,338.9146 188.2744,338.9146 Q186.9297,338.9146 186.2449,339.9812 Q185.5601,341.0479 185.5601,343.1479 Q185.5601,345.2397 186.2449,346.3064 Q186.9297,347.373 188.2744,347.373 Q188.9053,347.373 189.4988,347.1033 Q190.0923,346.8335 190.7231,346.2524 Z "/><text fill="#000000" font-family="Source Sans Pro Semibold" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="60" x="234.25" y="340.8008">«Contract»</text><text fill="#000000" font-family="Source Sans Pro Semibold" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="112" x="208.25" y="354.9336">TestParticipationDB</text><line style="stroke: #383838; stroke-width: 1.5;" x1="7" x2="489" y1="362.4648" y2="362.4648"/><text fill="#000000" font-family="Source Sans Pro Semibold" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="167" x="12" y="377.0996">-testParticipationIDs: bytes32[]</text><text fill="#000000" font-family="Source Sans Pro Semibold" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="320" x="12" y="390.0547">-testParticipations: mapping {bytes32 =&gt; TestParticipation}</text><line style="stroke: #383838; stroke-width: 1.5;" x1="7" x2="489" y1="396.375" y2="396.375"/><text fill="#000000" font-family="Source Sans Pro Semibold" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="305" x="12" y="411.0098">+exists(studentID: address, testID: uint) : bool {constant}</text><text fill="#000000" font-family="Source Sans Pro Semibold" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="292" x="12" y="423.9648">+addTestParticipation(studentID: address, testID: uint)</text><text fill="#000000" font-family="Source Sans Pro Semibold" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="472" x="12" y="436.9199">+getTestParticipationAt(index: uint) : Tuple { studentID: address, testID: uint } {constant}</text><text fill="#000000" font-family="Source Sans Pro Semibold" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="462" x="12" y="449.875">+getTestParticipation(id: bytes32) : Tuple { studentID: address, testID: uint } {constant}</text><!--link ContractManager to ContractProvider--><path d="M561.9244,109.5042 C565.1789,126.0572 568.994,145.4619 572.4773,163.1786 " fill="none" id="ContractManager-ContractProvider" style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="none" points="579.3705,161.9543,576.3605,182.9291,565.6335,164.6552,579.3705,161.9543" style="stroke: #383838; stroke-width: 1.0;"/><!--link ManagedContract to ContractProvider--><path d="M398.6044,216.6992 C421.3427,216.6992 447.4168,216.6992 472.6605,216.6992 " fill="none" id="ManagedContract-ContractProvider" style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#383838" points="477.6969,216.6992,468.6969,212.6992,472.6969,216.6992,468.6969,220.6992,477.6969,216.6992" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="Source Sans Pro Semibold" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="43" x="416.75" y="210.2676">«uses»</text><!--link ContractManager to ManagedContract--><path d="M489.2919,112.1922 C446.7876,140.4327 393.2508,176.0033 360.8732,197.5154 " fill="none" id="ContractManager-ManagedContract" style="stroke: #383838; stroke-width: 1.0;"/><polygon fill="#383838" points="493.6308,109.3094,483.921,110.9584,489.4662,112.0764,488.3482,117.6217,493.6308,109.3094" style="stroke: #383838; stroke-width: 1.0;"/><!--link ManagedContract to TestParticipationDB--><path d="M313.9737,253.932 C304.0671,274.3939 291.4851,300.3817 279.9711,324.1636 " fill="none" id="ManagedContract-TestParticipationDB" style="stroke: #383838; stroke-width: 1.0;"/><polygon fill="none" points="307.6738,250.8805,322.6896,235.9296,320.2747,256.9812,307.6738,250.8805" style="stroke: #383838; stroke-width: 1.0;"/><!--link TestParticipation to TestParticipationDB--><path d="M188.1904,263.6508 C196.9651,282.2168 207.2073,303.8879 216.711,323.9962 " fill="none" id="TestParticipation-TestParticipationDB" style="stroke: #383838; stroke-width: 1.0;"/><!--link Student to TestParticipation--><path d="M212.9404,88.4822 C205.3931,109.0978 193.1489,142.5425 183.0581,170.1052 " fill="none" id="Student-TestParticipation" style="stroke: #383838; stroke-width: 1.0;"/><!--link Test to TestParticipation--><path d="M118.1903,88.4822 C125.8774,109.0978 138.3483,142.5425 148.626,170.1052 " fill="none" id="Test-TestParticipation" style="stroke: #383838; stroke-width: 1.0;"/><!--
@startuml


'skinparam handwritten true
skinparam monochrome true
skinparam shadowing false
skinparam classAttributeIconSize 0
skinparam defaultFontName "Source Sans Pro Semibold"
    







title Owned

class Owned << Contract >> {
  +owner: address
  __
  +Owned()
  .. Modifier ..
  #onlyOwner()
}



title ContractProvider

interface ContractProvider << Interface >> {
  +contracts(name: bytes32) : address
}


title ContractManager

class ContractManager << Contract >> {
  +contracts: mapping {name: bytes32 => address}
  +addContract(contractName: bytes32, contractAddress: address) : bool {onlyOwner}
}

ContractManager -up-|> Owned

ContractManager .down.|> ContractProvider


title ManagedContract

class ManagedContract << Contract >> {
  #MAN: address
  __
  +setContractManagerAddress(contractManagerAddress: address) : bool
  .. Modifier ..
  #permission(permittedSender: bytes32)
}

ManagedContract .right.> ContractProvider : << uses >>
ManagedContract -up-> ContractManager

hide Owned




title StudentDB

class Student << Struct >> {
  name: bytes32
  matrNr: uint
  index: uint
  testParticipationIDs: bytes32[]
  courseParticipationIDs: bytes32[]
  studentSubmissionIDs: bytes32[]
}

class StudentDB << Contract >> {
  -indices: address[]
  -students: mapping {address => Student}
  __
  +isStudent(account: address) : bool {constant}
  +addStudent(account: address, name: bytes32, matrNr: uint)
  +getStudent(account: address) : Tuple { name: bytes32, matrNr: uint } {constant}
  +getStudentAt(index: uint) : Tuple { name: bytes32, matrNr: uint } {constant}
  +getNumStudents() : uint {constant}
  .. Setter for combined values ..
  +addTestParticipationID(account: address, id: bytes32) {permission: "testparticipationdb"}
  +addCourseParticipationID(account: address, id: bytes32) {permission: "courseparticipationdb"}
  +addStudentSubmissionID(account: address, id: bytes32) {permission: "studentsubmissiondb"}
}

StudentDB -up-|> ManagedContract
StudentDB -down- Student

hide ManagedContract members






title CourseDB

class Course << Struct >> {
  description: string
  ectsPoints: uint
  name: bytes32
  assignmentIDs: uint[]
  testIDs: uint[]
  courseParticipationIDs: bytes32[]
  courseSupervisionIDs: bytes32[]
}

class CourseDB << Contract >> {
  -courses: Course[]
  __
  +addCourse(description: string, name: bytes32, ectsPoints: uint) : uint
  +getCourse(id: uint) : Tuple { description: string, name: bytes32, ectsPoints: uint } {constant}
  +getNumCourses() : uint {constant}
  .. Setter for combined values ..
  +addCourseParticipationID(courseID: uint, id: bytes32) {permission: "courseparticipationdb" }
  +addCourseSupervisionID(courseID: uint, id: bytes32) {permission: "coursesupervisiondb"}
  +addAssignmentID(courseID: uint, id: uint) {permission: "assignmentdb"}
  +addTestID(courseID: uint, id: uint) {permission: "testdb"}
}

CourseDB -up-|> ManagedContract
CourseDB -down- Course

hide ManagedContract members


title TestDB

class Test << Struct >> {
  description: string
  maxPoints: uint
  dueDate: uint
  courseID: uint
  submissionIDs: uint[]
  testParticipationIDs: bytes32[]
  testSupervisionIDs: bytes32[]
}

class TestDB << Contract >> {
  -tests: Test[]
  __
  +addTest(description: string, maxPoints: uint, dueDate: uint, courseID: uint) : uint
  +getTest(id: uint) : Tuple { description: string, maxPoints: uint, dueDate: uint, courseID: uint } {constant}
  +getNumTests() : uint {constant}
  .. Setter for combined values ..
  +addTestParticipationID(testID: uint, id: bytes32) {permission: "testparticipationdb"}
  +addTestSupervisionID(testID: uint, id: bytes32) {permission: "testsupervisiondb"}
  +addSubmissionID(testID: uint, id: uint) {permission: "submissiondb"}
}

TestDB -up-|> ManagedContract
TestDB -down- Test
Test -left- Course

hide ManagedContract members
hide CourseDB
hide Course members


title TestParticipationDB

class TestParticipation << Struct >> {
  studentID: address
  testID: uint
  idIndex: uint
}

class TestParticipationDB <<Contract>> {
  -testParticipationIDs: bytes32[]
  -testParticipations: mapping {bytes32 => TestParticipation}
  __
  +exists(studentID: address, testID: uint) : bool {constant}
  +addTestParticipation(studentID: address, testID: uint)
  +getTestParticipationAt(index: uint) : Tuple { studentID: address, testID: uint } {constant}
  +getTestParticipation(id: bytes32) : Tuple { studentID: address, testID: uint } {constant}
}

TestParticipationDB -up-|> ManagedContract
TestParticipationDB -up- TestParticipation
TestParticipation -up- Student
TestParticipation -up- Test

hide ManagedContract members
hide StudentDB
hide Student members
hide TestDB
hide Test members
hide Course

@enduml

PlantUML version 1.2017.18(Fri Oct 06 18:56:32 CEST 2017)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_131-b11
Operating System: Mac OS X
OS Version: 10.12.6
Default Encoding: UTF-8
Language: de
Country: AT
--></g></svg>